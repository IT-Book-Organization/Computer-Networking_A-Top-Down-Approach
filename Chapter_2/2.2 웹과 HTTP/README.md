# 2.2 μ›Ήκ³Ό HTTP

μ›Ήμ€ `μ¨λ””λ§¨λ“(on-demand) λ°©μ‹`μΌλ΅ **μ‚¬μ©μκ°€ μ›ν•  λ• μ›ν•λ” κ²ƒμ„ μμ‹ ν•λ‹¤.**

κ°μΈμ€ λν•, μ›Ή μƒμ—μ„ λ§μ€ μ •λ³΄λ¥Ό μ–»κ³  μƒνΈμ‘μ©ν•  μ μλ‹¤.

<br/>
<br/>
<br/>

# 2.2.1 HTTP κ°μ”

`μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ ν”„λ΅ν† μ½`μ€ μ›Ήμ μ¤‘μ‹¬μ΄λ‹¤.

RFC 1945, RFC 7230, RFC 7540μ— μ •μλμ–΄ μλ‹¤.

`HTTP`λ” **λ©”μ‹μ§€μ κµ¬μ΅°** λ° **ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ©”μ‹μ§€λ¥Ό μ–΄λ–»κ² κµν™ν•λ”μ§€**μ— λ€ν•΄ μ •μν•κ³  μλ‹¤.

μμ„Έν μ„¤λ…ν•κΈ° μ „μ— μ›Ή μ „λ¬Έ μ©μ–΄λ“¤μ„ μ•μ•„λ³΄μ.

<br/>
<br/>

## μ›Ή νμ΄μ§€(web page)

> μ›Ή νμ΄μ§€λ“¤μ€ κ°μ²΄(object)λ΅ κµ¬μ„±λλ‹¤.

κ°μ²΄λ” λ‹¨μν λ‹¨μΌ URLλ΅ μ§€μ •ν•  μ μλ” ν•λ‚μ νμΌ(HTML, JPEG μ΄λ―Έμ§€, μλ°”μ¤ν¬λ¦½νΈ λ“±)μ΄λ‹¤.

<br/>

λ€λ¶€λ¶„μ μ›Ή νμ΄μ§€λ” κΈ°λ³Έ HTML νμΌκ³Ό μ—¬λ¬ μ°Έμ΅° κ°μ²΄λ΅ κµ¬μ„±λλ‹¤.

μλ¥Ό λ“¤μ–΄, μ›Ή νμ΄μ§€κ°€ HTML ν…μ¤νΈμ™€ 5κ°μ JPEG μ΄λ―Έμ§€λ΅ κµ¬μ„±λμ–΄ μμΌλ©΄, μ΄ μ›Ήνμ΄μ§€λ” 6κ°μ κ°μ²΄λ¥Ό κ°–λ”λ‹¤.

<br/>

κΈ°λ³Έ HTML νμΌμ€ νμ΄μ§€ λ‚΄λ¶€μ λ‹¤λ¥Έ κ°μ²΄λ¥Ό κ·Έ κ°μ²΄μ `URL`λ΅ μ°Έμ΅°ν•λ‹¤.

URLμ€ κ°μ²΄λ¥Ό κ°–κ³  μλ” μ„λ²„μ νΈμ¤νΈ μ΄λ¦„κ³Ό κ°μ²΄μ κ²½λ΅ μ΄λ¦„μ„ κ°–κ³  μλ‹¤.

e.g.,

```
http://www.school.edu/picture.gif 
```

- νΈμ¤νΈμ μ΄λ¦„ : `www.school.edu`
- κ²½λ΅ μ΄λ¦„ : `picture.gif`

<br/>
<br/>

## μ›Ή λΈλΌμ°μ €μ™€ ν΄λΌμ΄μ–ΈνΈ

`μ›Ή λΈλΌμ°μ €(Web browser)`λ” HTTPμ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ„ κµ¬ν„ν•κΈ° λ•λ¬Έμ—, μ›Ήμ κ΄€μ μ—μ„ λΈλΌμ°μ €μ™€ `ν΄λΌμ΄μ–ΈνΈ(client)`λΌλ” μ©μ–΄λ¥Ό νΌμ©ν•μ—¬ μ‚¬μ©ν•λ‹¤.

λΈλΌμ°μ €λ” μ”κµ¬ν• μ›Ή νμ΄μ§€λ¥Ό λ³΄μ—¬μ£Όκ³  μ—¬λ¬κ°€μ§€ μΈν„°λ„· ν•­ν•΄μ™€ κµ¬μ„± νΉμ„±μ„ μ κ³µν•λ‹¤.

<br/>

`μ›Ή μ„λ²„(Web server)`λ” URLλ΅ κ°κ°μ„ μ§€μ •ν•  μ μλ” μ›Ή κ°μ²΄λ¥Ό κ°–κ³  μλ‹¤.

μΌλ°μ μΌλ΅, μ‚¬μ©μκ°€ μ›Ή νμ΄μ§€λ¥Ό μ”μ²­ν•  λ•  
(1) λΈλΌμ°μ €λ” νμ΄μ§€ λ‚΄λ¶€μ κ°μ²΄μ— λ€ν• HTTP μ”μ²­ λ©”μ„Έμ§€λ¥Ό μ„λ²„μ—κ² λ³΄λ‚΄κ³ ,  
(2) μ„λ²„λ” μ”μ²­μ„ μμ‹ ν•κ³  κ°μ²΄λ¥Ό ν¬ν•¨ν•λ” HTTP μ‘λ‹µ λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ‹¤.

<p align="center"><img width="450" alt="μ›Ήμ„λ²„μ™€ λΈλΌμ°μ €" src="https://user-images.githubusercontent.com/76640167/210488592-53e2960a-2ec3-4ecf-8408-8d51a3ebb968.png">

<br/>
<br/>
<br/>

## HTTPμ™€ TCP

> HTTPλ” `TCP`λ¥Ό μ „μ†΅ ν”„λ΅ν† μ½λ΅ μ‚¬μ©ν•λ‹¤.

<br/>

1. HTTP ν΄λΌμ΄μ–ΈνΈλ” λ¨Όμ € μ„λ²„μ— TCP μ—°κ²°μ„ μ‹μ‘ν•λ‹¤.


2. μ—°κ²°μ΄ μ΄λ£¨μ–΄μ§€λ©΄, λΈλΌμ°μ €μ™€ μ„λ²„ ν”„λ΅μ„Έμ¤λ” κ°κ°μ μ†μΌ“ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ TCPλ΅ μ ‘μ†ν•λ‹¤.


3. ν΄λΌμ΄μ–ΈνΈλ” `HTTP μ”μ²­ λ©”μ‹μ§€`λ¥Ό μ†μΌ“ μΈν„°νμ΄μ¤λ΅ λ³΄λ‚΄κ³ , μ†μΌ“ μΈν„°νμ΄μ¤λ΅λ¶€ν„° `HTTP μ‘λ‹µ λ©”μ‹μ§€`λ¥Ό λ°›λ”λ‹¤.  
   λ§μ°¬κ°€μ§€λ΅, HTTP μ„λ²„λ” μ†μΌ“ μΈν„°νμ΄μ¤λ΅λ¶€ν„° μ”μ²­ λ©”μ‹μ§€λ¥Ό λ°›κ³  μ‘λ‹µ λ©”μ‹μ§€λ¥Ό μ†μΌ“ μΈν„°νμ΄μ¤λ΅ λ³΄λ‚Έλ‹¤.

<br/>

μ΄λ ‡κ² TCPλ¥Ό ν†µν•΄ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ©΄ **TCPλ” μ‹ λΆ°μ μΈ λ°μ΄ν„° μ „μ†΅ μ„λΉ„μ¤λ¥Ό μ κ³µν•λ―€λ΅**  
**λ¨λ“  HTTP μ”μ²­ λ©”μ‹μ§€κ°€ κ¶κ·Ήμ μΌλ΅ μ„λ²„μ— λ„μ°©ν•λ‹¤.** (μ„λ²„μ—μ„ λ³΄λ‚Έ λ©”μ‹μ§€λ„ λ§μ°¬κ°€μ§€λ‹¤.)

HTTPλ” TCPκ°€ μ–΄λ–»κ² μ†μ‹¤ λ°μ΄ν„°λ¥Ό λ³µκµ¬ν•κ³ , μ¬λ°”λ¥Έ μμ„λ΅ λ°μ΄ν„°λ¥Ό λ°°μ—΄ν•λ”μ§€ **μ „ν€ κ±±μ •ν•  ν•„μ”κ°€ μ—†μ–΄** κ³„μΈµ κµ¬μ΅°μ μ¥μ μ΄ λ“λ¬λ‚λ‹¤.

<br/>
<br/>

## λΉ„μƒνƒ(stateless) ν”„λ΅ν† μ½

νΉμ • ν΄λΌμ΄μ–ΈνΈκ°€ λ‡ μ΄ ν›„μ— κ°™μ€ κ°μ²΄λ¥Ό λ‘ λ² μ”μ²­ν•΄λ„ μ„λ²„λ” μ „μ— λ³΄λƒλ‹¤κ³  μ•λ ¤μ£Όμ§€ μ•κ³  κ°μ²΄λ¥Ό λ λ³΄λ‚Έλ‹¤.

HTTP μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ— λ€ν• μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•μΌλ―€λ΅, `λΉ„μƒνƒ(stateless) ν”„λ΅ν† μ½`μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

<br/>
<br/>
<br/>

# 2.2.2 λΉ„μ§€μ† μ—°κ²°κ³Ό μ§€μ† μ—°κ²°

## λΉ„μ§€μ†(non-persistent) μ—°κ²°

> π’΅ ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μƒνΈμ‘μ©μ΄ TCP μƒμ—μ„ λ°μƒν•  λ• **κ° μ”κµ¬/μ‘λ‹µ μμ΄ λ¶„λ¦¬λ TCP μ—°κ²°**μ„ ν†µν•΄ λ³΄λ‚΄μ§€λ” κ²ƒμ„ λ§ν•λ‹¤.

<br>

μ›Ή νμ΄μ§€λ¥Ό μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•λ” λ‹¨κ³„λ¥Ό μ‚΄ν΄λ³΄μ.

νμ΄μ§€κ°€ **κΈ°λ³Έ HTML νμΌκ³Ό 10κ°μ μ΄λ―Έμ§€**λ΅ κµ¬μ„±λκ³ , μ΄ 11κ°μ κ°μ²΄κ°€ κ°™μ€ μ„λ²„μ— μλ‹¤κ³  κ°€μ •ν•μ.

<br>

μ—°κ²° μν–‰ κ³Όμ •μ€ λ‹¤μκ³Ό κ°™λ‹¤.

1. HTTP ν΄λΌμ΄μ–ΈνΈλ” `HTTP κΈ°λ³Έ ν¬νΈ 80`μ„ ν†µν•΄ μ„λ²„λ΅ `TCP μ—°κ²°`μ„ μ‹λ„ν•λ‹¤. TCP μ—°κ²°κ³Ό κ΄€λ ¨ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ— κ°κ° μ†μΌ“μ΄ μκ² λλ‹¤.


2. HTTP ν΄λΌμ΄μ–ΈνΈλ” μ„¤μ •λ TCP μ—°κ²° μ†μΌ“μ„ ν†µν•΄ μ„λ²„λ΅ HTTP μ”μ²­ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤. μ΄ μ”μ²­μ— κ°μ²΄ κ²½λ΅λ„ ν¬ν•¨λλ‹¤.


3. HTTP μ„λ²„λ” TCP μ—°κ²° μ†μΌ“μ„ ν†µν•΄ μ”μ²­ λ©”μ‹μ§€λ¥Ό λ°›λ”λ‹¤. μ €μ¥ μ¥μΉλ΅λ¶€ν„° κ²½λ΅μ κ°μ²΄λ¥Ό μ¶”μ¶ν•λ‹¤.  
   HTTP μ‘λ‹µ λ©”μ‹μ§€μ— κ·Έ κ°μ²΄λ¥Ό μΊ΅μν™” ν•μ—¬ μ†μΌ“μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚Έλ‹¤.


4. HTTP μ„λ²„λ” TCPμ—κ² μ—°κ²°μ„ λμΌλΌκ³  ν•λ‹¤. (κ·Έλ¬λ‚ μ‹¤μ λ΅ ν΄λΌμ΄μ–ΈνΈκ°€ μ‘λ‹µ λ©”μ‹μ§€λ¥Ό μ¬λ°”λ΅ λ°›μ„ λ•κΉμ§€ λμ§€ μ•λ”λ‹¤.)


5. HTTP ν΄λΌμ΄μ–ΈνΈκ°€ μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ°›μΌλ©΄, TCP μ—°κ²°μ΄ μ¤‘λ‹¨λλ‹¤. λ©”μ‹μ§€λ” μΊ΅μν™”λ κ°μ²΄κ°€ HTML νμΌμΈ κ²ƒμ„ λ‚νƒ€λ‚Έλ‹¤.  
   ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µ λ©”μ‹μ§€λ΅λ¶€ν„° νμΌμ„ μ¶”μ¶ν•κ³  HTML νμΌμ„ μ΅°μ‚¬ν•μ—¬ 10κ°μ JPEG κ°μ²΄μ— λ€ν• μ°Έμ΅°λ¥Ό μ°Ύλ”λ‹¤.


6. **μ°Έμ΅°λλ” JPEG κ°μ²΄μ— λ€ν•΄ 1 ~ 4λ‹¨κ³„λ¥Ό λ°λ³µν•λ‹¤.**

<br/>

λΈλΌμ°μ €λ” μ›Ή νμ΄μ§€λ¥Ό μμ‹ ν•λ©΄μ„, μ‚¬μ©μμ—κ² κ·Έ νμ΄μ§€λ¥Ό λ³΄μ—¬μ¤€λ‹¤. λ‹¤λ¥Έ λΈλΌμ°μ €λ” μ›Ή νμ΄μ§€λ¥Ό κ°κΈ° λ‹¤λ¥Έ λ°©μ‹μΌλ΅ ν•΄μ„ν•μ—¬ λ³΄μ—¬μ¤€λ‹¤.

> HTTPλ” ν†µμ‹  ν”„λ΅ν† μ½λ§ μ •μν•  λΏ, μ›Ή νμ΄μ§€μ— λ€ν• κ΄€μ‹¬μ€ μ—†λ‹¤.

<br/>

μ‚¬μ©μλ” μ•μ λ‹¨κ³„λ¥Ό λ™μ‹μ— λ°›μ„μ§€ μμ°¨μ μΌλ΅ λ°›μ„μ§€μ λ™μ‹μ„± μ •λ„λ¥Ό μ΅°μ ν•  μ μλ„λ΅ λΈλΌμ°μ €λ¥Ό κµ¬μ„±ν•  μ μλ‹¤.

λΈλΌμ°μ €λ” **μ—¬λ¬ κ°μ TCP μ—°κ²°μ„ μ„¤μ •ν•λ©° λ‹¤μ¤‘ μ—°κ²°μƒμ—μ„ μ›Ή νμ΄μ§€μ κ°κΈ° λ‹¤λ¥Έ μ›ν•λ” λ¶€λ¶„μ„ μ”μ²­**ν•  μ μλ‹¤.

HTTP 1.0μ€ λΉ„μ§€μ† μ—°κ²°μ„ μ§€μ›ν•λ‹¤.

<br/>
<br/>

ν΄λΌμ΄μ–ΈνΈκ°€ HTML νμΌμ„ μ”μ²­ν•κ³  κ·Έ νμΌμ΄ ν΄λΌμ΄μ–ΈνΈλ΅ μμ‹ λ  λ•κΉμ§€μ μ‹κ°„μ„ μΈ΅μ •ν•΄λ³΄μ.

μ΄λ¥Ό μ„ν•΄ RTTλ¥Ό μ•μ•„μ•Ό ν•λ”λ°,  
`RTT(round-trip-time)`λ€ **μ‘μ€ ν¨ν‚·μ΄ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ„λ²„κΉμ§€ κ°€κ³ , λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈλ΅ λλμ•„μ¤λ” λ° κ±Έλ¦¬λ” μ‹κ°„**μ΄λ‹¤.

RTTλ” ν¨ν‚· μ „ν μ§€μ—°, νμ‰ μ§€μ—°, μ²λ¦¬ μ§€μ—° λ“±μ„ ν¬ν•¨ν•λ‹¤. (1μ¥μ— λ…Όμλμ–΄ μλ‹¤.)

<br/>

<p align="center"><img width="600" alt="HTML μ”μ²­ μ‹κ°„ κ³„μ‚°" src="https://user-images.githubusercontent.com/76640167/210491569-3638ca03-2d17-4eea-8a5f-d984bb831d00.png">

<br/>
<br/>

μ‚¬μ©μκ°€ ν•μ΄νΌλ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄, λΈλΌμ°μ €μ™€ μ›Ή μ„λ²„ μ‚¬μ΄μ—μ„ TCP μ—°κ²°μ„ μ‹λ„ν•λ‹¤. μ΄λ” `3-way handshake`λ¥Ό ν¬ν•¨ν•λ‹¤.

> μ¦‰, ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μ‘μ€ TCP λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κ³ , μ„λ²„λ” μ‘μ€ λ©”μ‹μ§€λ΅ μ‘λ‹µν•κ³ , λ§μ§€λ§‰μΌλ΅ ν΄λΌμ΄μ–ΈνΈκ°€ λ‹¤μ‹ μ„λ²„μ— μ‘λ‹µν•λ‹¤.

<br/>

μ„λ²„κ°€ μ‘μ€ λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ©΄ ν• RTTκ°€ κ³„μ‚°λλ‹¤. μ΄λ•, **ν΄λΌμ΄μ–ΈνΈλ” HTTP μ”μ²­ λ©”μ‹μ§€λ¥Ό TCP μ—°κ²°λ΅ λ³΄λ‚΄λ©΄μ„ μ„Έ λ²μ§Έ μ‘λ‹µ λ¶€λ¶„μ„ ν•¨κ» λ³΄λ‚Έλ‹¤.**

μΌλ‹¨, μ”μ²­ λ©”μ‹μ§€κ°€ λ„μ°©ν•λ©΄ μ„λ²„λ” HTML νμΌμ„ TCP μ—°κ²°λ΅ λ³΄λ‚΄κ³  μ΄ μ”μ²­μ€ λ ν•λ‚μ RTTλ¥Ό ν•„μ”λ΅ ν•λ‹¤.

> μ¦‰, λ€λµ μ΄ μ‘λ‹µ μ‹κ°„μ€ 2RTTμ™€ HTML νμΌμ„ μ„λ²„κ°€ μ „μ†΅ν•λ” λ° κ±Έλ¦¬λ” μ‹κ°„μ„ λ”ν• κ²ƒμ΄λ‹¤.

<br/>
<br/>

### λΉ„μ§€μ† μ—°κ²°μ λ‹¨μ 

1. **κ° μ”μ²­ κ°μ²΄μ— λ€ν• μƒλ΅μ΄ μ—°κ²°μ΄ μ„¤μ •λκ³  μ μ§€λμ–΄μ•Ό ν•λ‹¤.**
    - TCP λ²„νΌκ°€ ν• λ‹Ήλμ–΄μ•Ό ν•κ³ , TCP λ³€μλ“¤μ΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ–‘μ½μ— μ μ§€λμ–΄μ•Ό ν•λ”λ°  
      μ΄λ” μλ§μ€ ν΄λΌμ΄μ–ΈνΈλ“¤μ μ”μ²­μ„ λ™μ‹μ— μ„λΉ„μ¤ν•λ” μ›Ή μ„λ²„μ—λ” μ‹¬κ°ν• λ¶€λ‹΄μ΄λ‹¤.


2. λ§¤λ² 2RTTλ¥Ό ν•„μ”λ΅ ν•λ‹¤.

<br/>
<br/>
<br/>

## μ§€μ†(persistent) μ—°κ²°

HTTP/1.1 μ§€μ† μ—°κ²°μ—μ„ μ„λ²„λ” μ‘λ‹µμ„ λ³΄λ‚Έ ν›„μ— TCP μ—°κ²°μ„ κ·Έλ€λ΅ μ μ§€ν•λ‹¤. (λΉ„μ§€μ† μ—°κ²°λ„ μ§€μ›ν•λ‹¤.)

**κ°™μ€ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ΄ν›„ μ”μ²­κ³Ό μ‘λ‹µμ€ κ°™μ€ μ—°κ²°μ„ ν†µν•΄ λ³΄λ‚΄μ§„λ‹¤.**

μ¦‰, κ°™μ€ μ„λ²„μ— μλ” μ—¬λ¬ μ›Ή νμ΄μ§€λ“¤μ„ ν•λ‚μ μ§€μ† TCP μ—°κ²°μ„ ν†µν•΄ λ³΄λ‚Ό μ μλ‹¤.

<br/>

μ΄λ“¤ κ°μ²΄μ— λ€ν• μ”κµ¬λ” μ§„ν–‰ μ¤‘μΈ μ”κµ¬μ— λ€ν• μ‘λ‹µμ„ κΈ°λ‹¤λ¦¬μ§€ μ•κ³  μ—°μ†ν•΄μ„ λ§λ“¤ μ μλ‹¤. (νμ΄ν”„λΌμ΄λ‹, pipelining)

μΌλ°μ μΌλ΅ HTTP μ„λ²„λ” μΌμ • κΈ°κ°„ μ‚¬μ©λμ§€ μ•μΌλ©΄ μ—°κ²°μ„ λ‹«λ”λ‹¤.

HTTPμ λ””ν΄νΈ λ¨λ“λ” νμ΄ν”„λΌμ΄λ‹μ„ μ΄μ©ν• μ§€μ† μ—°κ²°μ„ μ‚¬μ©ν•λ‹¤.

<br/>
<br/>

## HTTP λ©”μ‹μ§€ ν¬λ§·

RFCλ” HTTP λ©”μ‹μ§€ ν¬λ§·μ„ μ •μν•λ‹¤.

### HTTP μ”μ²­ λ©”μ‹μ§€

<p align="center"><img width="600" alt="μ”μ²­ λ©”μ‹μ§€ ν¬λ§·" src="https://user-images.githubusercontent.com/76640167/210494014-891426d1-0c27-47dc-8271-c6f5bab316e9.png"></p>

<br/>
<br/>

λ‹¤μμ€ μ „ν•μ μΈ HTTP μ”μ²­ λ©”μ‹μ§€μ΄λ‹¤.

```
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```

<br/>

#### νΉμ§•

1. ASCII ν…μ¤νΈλ΅ μ“°μ—¬ μμ–΄ μ‚¬λλ“¤μ΄ μ½μ„ μ μλ‹¤.
2. λ©”μ‹μ§€κ°€ λ‹¤μ„― μ¤„λ΅ λμ–΄ μκ³ , **κ° μ¤„μ€ CR(carriage return)κ³Ό LF(line feed)λ΅ κµ¬λ³„λλ‹¤.** λ§μ§€λ§‰ μ¤„μ— μ΄μ–΄μ„ CRκ³Ό LFκ°€ λ”°λ¥Έλ‹¤.

HTTP μ”μ²­ λ©”μ‹μ§€μ μ²« μ¤„μ€ `μ”μ²­ λΌμΈ`μ΄λΌ λ¶€λ¥΄κ³ , μ΄ν›„μ μ¤„λ“¤μ€ `ν—¤λ” λΌμΈ`μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

<br/>

### μ”μ²­ λΌμΈ

μ”μ²­ λΌμΈμ€ 3κ°μ ν•„λ“, μ¦‰ `λ°©μ‹(method)` ν•„λ“, `URL ν•„λ“`, `HTTP λ²„μ „ ν•„λ“`λ¥Ό κ°–λ”λ‹¤.

λ°©μ‹ ν•„λ“λ” `GET`, `POST`, `HEAD`, `PUT`, `DELETE` λ“±μ μ—¬λ¬ κ°€μ§€ κ°’μ„ κ°€μ§ μ μλ‹¤.

<br/>
<br/>

### ν—¤λ” λΌμΈ

1. Host
    - κ°μ²΄κ°€ μ΅΄μ¬ν•λ” νΈμ¤νΈλ¥Ό λ…μ‹ν•λ‹¤.
    - μ΄λ―Έ νΈμ¤νΈκΉμ§€ TCP μ—°κ²°μ΄ λ§Ίμ–΄μ Έ μμ–΄ λ¶ν•„μ”ν•λ‹¤κ³  μƒκ°λ  μ μμ§€λ§, 2.2.5μ μ—μ„ λ‚μ¤λ” μ›Ή ν”„λ΅μ‹ μΊμ‹μ—μ„ ν•„μ”λ΅ ν•λ‹¤.
2. Connection : μ΄ ν—¤λ” λΌμΈμ„ ν¬ν•¨ν•¨μΌλ΅μ¨, λΈλΌμ°μ €λ” μ„λ²„μ—κ² μ§€μ† μ—°κ²° μ‚¬μ©μ„ μ›ν•λ”μ§€ λΉ„μ§€μ† μ—°κ²° μ‚¬μ©μ„ μ›ν•λ”μ§€ μ „λ‹¬ν•λ‹¤.
3. User-agent : μ„λ²„μ—κ² μ”μ²­μ„ ν•λ” λΈλΌμ°μ € νƒ€μ…μ„ λ…μ‹ν•λ‹¤.
4. Accept-language : ν—¤λ”λ” μ‚¬μ©μκ°€ κ°μ²΄μ μ–΄λ–¤ μ–Έμ–΄ λ²„μ „μ„ μ›ν•κ³  μμμ„ λ‚νƒ€λ‚Έλ‹¤.

<br/>
<br/>

## κ°μ²΄ λΈμ²΄(entity body)

GETμΌ λ•λ” λΉ„μ–΄μκ³ , `POST`μΌ λ• μ‚¬μ©λλ‹¤.

POST λ©”μ‹μ§€λ΅ μ‚¬μ©μλ” μ„λ²„μ— μ›Ή νμ΄μ§€λ¥Ό μ”μ²­ν•κ³  μμΌλ‚, μ›Ή νμ΄μ§€μ νΉμ • λ‚΄μ©μ€ μ‚¬μ©μκ°€ νΌ ν•„λ“μ— λ¬΄μ—‡μ„ μ…λ ¥ν•λ”κ°€μ— λ‹¬λ ¤ μλ‹¤.

νΌμΌλ΅ μƒμ„±ν• μ”κµ¬κ°€ λ°λ“μ‹ POSTμΌ ν•„μ”λ” μ—†λ‹¤. λ€μ‹ μ— ν”ν μ”μ²­λ URLμ μ…λ ¥ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ‹¤.

<br/>

`HEAD` λ°©μ‹μ€ GETκ³Ό μ μ‚¬ν•λ‹¤.

**μ„λ²„κ°€ HEAD λ°©μ‹μ„ κ°€μ§„ μ”μ²­μ„ λ°›μΌλ©΄ HTTP λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ”λ°, μ”μ²­ κ°μ²΄λ” λ³΄λ‚΄μ§€ μ•λ”λ‹¤.** ν”ν λ””λ²„κΉ…μ„ μ„ν•΄ μ‚¬μ©λλ‹¤.

<br/>

`PUT` λ°©μ‹μ€ μ›Ή μ„λ²„μ— μ—…λ΅λ“ν•  κ°μ²΄λ¥Ό ν•„μ”λ΅ ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— μν•΄ μ‚¬μ©λλ‹¤.

`DELETE` λ°©μ‹μ€ μ‚¬μ©μ λλ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ›Ή μ„λ²„μ— μλ” κ°μ²΄λ¥Ό μ§€μ°λ” κ²ƒμ„ ν—μ©ν•λ‹¤.

<br/>
<br/>

---

<br/>

### HTTP μ‘λ‹µ λ©”μ‹μ§€

<p align="center"><img width="600" alt="μ‘λ‹µ λ©”μ‹μ§€" src="https://user-images.githubusercontent.com/76640167/210497215-8265b94b-c82f-4ea8-9374-5f41fc6eaed1.png">

<br/>
<br/>

λ‹¤μμ€ μ „ν•μ μΈ HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ³΄μ—¬μ¤€λ‹¤.

```
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-Type: text/html
(data data data data data ...)
```

<br/>

### μƒνƒ λΌμΈκ³Ό μƒνƒ μ½”λ“

`μƒνƒ λΌμΈ(status line)`μ€ λ²„μ „ ν•„λ“μ™€ μƒνƒ μ½”λ“, ν•΄λ‹Ή μƒνƒ λ©”μ‹μ§€λ¥Ό κ°–λ”λ‹¤.

μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€

- 200 OK: μ”μ²­μ΄ μ„±κ³µν–κ³ , μ •λ³΄κ°€ μ‘λ‹µμΌλ΅ λ³΄λ‚΄μ΅λ‹¤.
- 301 Moved Permanently: μ”μ²­ κ°μ²΄κ°€ μμ›ν μ΄λ™λμ—λ‹¤. μ΄λ•, μƒλ΅μ΄ URLμ€ μ‘λ‹µ λ©”μ‹μ§€μ Location ν—¤λ”μ— λ‚μ™€μλ‹¤.
- 400 Bad Request : μ„λ²„κ°€ μ”μ²­μ„ μ΄ν•΄ν•  μ μ—†λ‹¤.
- 404 Not Found : μ”μ²­ν• λ¬Έμ„κ°€ μ„λ²„μ— μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤.
- 505 HTTP Version Not Supported : μ”μ²­ HTTP ν”„λ΅ν† μ½ λ²„μ „μ„ μ„λ²„κ°€ μ§€μ›ν•μ§€ μ•λ”λ‹¤.

<br/>

### ν—¤λ” λΌμΈ

1. Connection : ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έ ν›„ TCP μ—°κ²°μ„ λ‹«μ„μ§€ λ§μ§€ κ²°μ •ν•λ‹¤.
2. Date : HTTP μ‘λ‹µμ΄ μ„λ²„μ— μν•΄ μƒμ„±λκ³  λ³΄λ‚Έ λ‚ μ§μ™€ μ‹κ°„μ„ λ‚νƒ€λ‚Έλ‹¤.
3. Server : λ©”μ‹μ§€κ°€ μ–΄λ–¤ μ›Ή μ„λ²„μ— μν•΄ λ§λ“¤μ–΄μ΅λ”μ§€ λ‚νƒ€λ‚Έλ‹¤.
4. Last-Modified : κ°μ²΄κ°€ μƒμ„±λκ±°λ‚ λ§μ§€λ§‰μΌλ΅ μμ •λ μ‹κ°„κ³Ό λ‚ μ§λ¥Ό λ‚νƒ€λ‚Έλ‹¤.
5. Content-Length : μ†΅μ‹ λλ” κ°μ²΄μ λ°”μ΄νΈ μλ¥Ό λ‚νƒ€λ‚Έλ‹¤.
6. Content-Type : κ°μ²΄ λΈμ²΄ λ‚΄λ¶€(Entity body)μ κ°μ²΄κ°€ μ–΄λ–¤ νƒ€μ…μΈμ§€ λ‚νƒ€λ‚Έλ‹¤.

<br/>

HTTP λ…μ„Έμ„λ” λ§μ€ ν—¤λ”λΌμΈμ„ μ •μν•κ³  μκ³ , μ„λ” κ·Έ μ¤‘ μΌλ¶€λ‹¤.

λΈλΌμ°μ €λ” λΈλΌμ°μ € νƒ€μ…κ³Ό μ—¬λ¬ μ„¤μ •, μΊμ‹±ν•κ³  μλ”μ§€μ— λ”°λΌ ν—¤λ” λΌμΈμ„ λ™μ μΌλ΅ μƒμ„±ν•κ³  μ›Ή μ„λ²„λ„ λΉ„μ·ν•λ‹¤.

<br/>
<br/>
<br/>

# 2.2.4 μ‚¬μ©μμ™€ μ„λ²„ κ°„μ μƒνΈ μ‘μ©: μΏ ν‚¤(cookie)

HTTP μ„λ²„λ” μƒνƒλ¥Ό μ μ§€ν•μ§€ μ•λ”λ‹¤.

κ·Έλ¬λ‚ μ„λ²„κ°€ μ‚¬μ©μ μ ‘μ†μ„ μ ν•ν•κ±°λ‚ μ‚¬μ©μμ— λ”°λΌ μ½ν…μΈ λ¥Ό μ κ³µν•κΈ° μ›ν•λ―€λ΅  
**μ‚¬μ©μλ¥Ό ν™•μΈν•λ” κ²ƒμ΄ λ°”λμ§ν•  λ•κ°€ μλ”λ°, μ΄λ• HTTPλ” `μΏ ν‚¤(cookie)`λ¥Ό μ‚¬μ©ν•λ‹¤.**

> over stateless HTTP, `cookie` provides a **state related service layer**

<br/>

<p align="center"><img width="700" alt="μΏ ν‚¤λ¥Ό μ΄μ©ν• μƒνƒ μ μ§€" src="https://user-images.githubusercontent.com/76640167/210499304-190c6dc5-ab64-4864-9f25-bb27fc63f460.png">

<br/>
<br/>

## μΏ ν‚¤ λ™μ‘ κ³Όμ •

1. μ›Ή μ„λ²„μ— HTTP μ”μ²­ λ©”μ‹μ§€λ¥Ό μ „λ‹¬ν•λ‹¤.
2. μ›Ή μ„λ²„λ” μ μΌν• μ‹λ³„ λ²νΈλ¥Ό λ§λ“¤κ³  μ΄ μ‹λ³„ λ²νΈλ΅ μΈλ±μ‹± λλ” λ°±μ—”λ“ λ°μ΄ν„° λ² μ΄μ¤ μ•μ— μ—”νΈλ¦¬λ¥Ό λ§λ“ λ‹¤.
3. **HTTP μ‘λ‹µ λ©”μ‹μ§€μ—** `Set-cookie: μ‹λ³„ λ²νΈ`μ ν—¤λ”λ¥Ό ν¬ν•¨ν•΄μ„ μ „λ‹¬ν•λ‹¤.
4. λΈλΌμ°μ €λ” ν—¤λ”λ¥Ό λ³΄κ³ , κ΄€λ¦¬ν•λ” νΉμ •ν• μΏ ν‚¤ νμΌμ— κ·Έ λΌμΈμ„ λ§λ¶™μΈλ‹¤.
5. λ‹¤μ‹ **λ™μΌ μ›Ή μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό λ•**  
   λΈλΌμ°μ €λ” μΏ ν‚¤ νμΌμ„ μ°Έμ΅°ν•κ³  μ΄ μ‚¬μ΄νΈμ— λ€ν• μ‹λ³„λ²νΈλ¥Ό λ°μ·ν•μ—¬ `Cookie : μ‹λ³„ λ²νΈ`μ ν—¤λ”λ¥Ό μ”μ²­κ³Ό ν•¨κ» λ³΄λ‚Έλ‹¤.

μ΄λ ‡κ² μ›Ή μ„λ²„λ” μ‚¬μ©μλ¥Ό μ‹λ³„ν•  μ μλ‹¤.

<br/>
<br/>
<br/>

# 2.2.5 μ›Ή μΊμ‹±

> `μ›Ή μΊμ‹(cache)`(`ν”„λ΅μ‹(proxy) μ„λ²„`)λ” κΈ°μ  μ›Ή μ„λ²„λ¥Ό λ€μ‹ ν•μ—¬ HTTP μ”κµ¬λ¥Ό μ¶©μ΅±μ‹ν‚¤λ” κ°μ²΄μ΄λ‹¤.

> Goal: satisfy client request **without involving origin server**

μ›Ή μΊμ‹λ” μμ²΄μ μ €μ¥ λ””μ¤ν¬λ¥Ό κ°–κ³  μμ–΄, **μµκ·Ό νΈμ¶λ κ°μ²΄μ μ‚¬λ³Έμ„ μ €μ¥ λ° λ³΄μ΅΄ν•λ‹¤.**

<br/>

<p align="center"><img width="450" alt="μ›Ή μΊμ‹±" src="https://user-images.githubusercontent.com/76640167/210502046-6dbbe817-240d-401d-8ec6-f3a73210e48d.png">

<br/>
<br/>

## ν”„λ΅μ‹ μ„λ²„ λ™μ‘ κ³Όμ •

1. λΈλΌμ°μ €λ” μ›Ή μΊμ‹μ™€ TCP μ—°κ²°μ„ μ„¤μ •ν•κ³  μ›Ή μΊμ‹μ— μλ” κ°μ²΄μ— λ€ν• HTTP μ”μ²­μ„ λ³΄λ‚Έλ‹¤.
2. μ›Ή μΊμ‹λ” κ°μ²΄μ μ‚¬λ³Έμ΄ μ €μ¥λμ–΄ μλ”μ§€ ν™•μΈν•κ³ , **μ €μ¥λμ–΄ μλ‹¤λ©΄ ν΄λΌμ΄μ–ΈνΈ λΈλΌμ°μ €λ΅ HTTP μ‘λ‹µ λ©”μ‹μ§€μ™€ ν•¨κ» κ°μ²΄λ¥Ό μ „μ†΅ν•λ‹¤.**
3. **κ°–κ³  μμ§€ μ•λ‹¤λ©΄, κΈ°μ  μ„λ²„λ΅ TCP μ—°κ²°μ„ μ„¤μ •ν•λ‹¤.**  
   μ΄ν›„ μ›Ή μΊμ‹λ” μΊμ‹μ™€ μ„λ²„ κ°„μ TCP μ—°κ²°λ΅ κ°μ²΄μ— λ€ν• HTTP μ”μ²­μ„ λ³΄λ‚Έλ‹¤. κΈ°μ  μ„λ²„λ” μ›Ή μΊμ‹λ΅ HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.
4. μ›Ή μΊμ‹μ κ°μ²΄λ¥Ό μμ‹ ν•  λ•, κ°μ²΄λ¥Ό μ§€μ—­ μ €μ¥μ¥μΉμ— λ³µμ‚¬ν•κ³  ν΄λΌμ΄μ–ΈνΈ λΈλΌμ°μ €μ— HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤. (μ΄λ•, μ΄λ―Έ μ„¤μ •λ TCPλ¥Ό ν†µν•΄ λ³΄λ‚Έλ‹¤.)

<br/>

> μΊμ‹(cache)λ” μ”μ²­κ³Ό μ‘λ‹µμ„ λ¨λ‘ ν•λ” ν΄λΌμ΄μ–ΈνΈμ΄λ©΄μ„ μ„λ²„μ΄λ‹¤.

- `server` for original requesting client
- `client` to origin server

<br/>

μΌλ°μ μΌλ΅ μ›Ή μΊμ‹λ” ISP(university, company, residential ISP)κ°€ κµ¬μ…ν•κ³  μ„¤μΉν•λ‹¤.

<br/>
<br/>

## μ›Ή μΊμ‹±μ μ‚¬μ© μ΄μ 

1. **ν΄λΌμ΄μ–ΈνΈ μ”κµ¬μ— λ€ν• μ‘λ‹µ μ‹κ°„μ„ μ¤„μΌ μ μλ‹¤.**  
   λ³΄ν†µ ν΄λΌμ΄μ–ΈνΈμ™€ μΊμ‹ μ‚¬μ΄μ— λ†’μ€ μ†λ„μ μ—°κ²°μ΄ μ„¤μ •λμ–΄ μμ–΄ μ›Ήμ„λ²„ μΊμ‹μ— κ°μ²΄λ¥Ό κ°–κ³  μλ‹¤λ©΄ λ³‘λ© ν„μƒμ„ μ¤„μΌ μ μλ‹¤.


2. μ›Ή μΊμ‹λ” ν• κΈ°κ΄€μ—μ„ μΈν„°λ„·μΌλ΅μ μ ‘μ†ν•λ” λ§ν¬ μƒμ μ›Ή νΈλν”½μ„ λ€ν­ μ¤„μΌ μ μλ‹¤.


3. μΈν„°λ„· μ „μ²΄μ μ›Ή νΈλν”½μ„ μ‹¤μ§μ μΌλ΅ μ¤„μ—¬μ£Όμ–΄ λ¨λ“  μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥μ΄ μΆ‹μ•„μ§„λ‹¤.

<br/>

### μ›Ή μΊμ‹ λ―Έμ‚¬μ©κ³Ό μ‚¬μ© μ„±λ¥ λΉ„κµ

<p align="center"><img width="370" alt="λ³‘λ© ν„μƒ" src="https://user-images.githubusercontent.com/76640167/210504713-f02f053c-e503-413f-8cbc-046c55082359.png">

<br/>
<br/>

- ν‰κ·  κ°μ²΄μ ν¬κΈ°κ°€ `1 Mb`μ΄κ³ , κΈ°κ΄€ λΈλΌμ°μ €λ΅λ¶€ν„° κΈ°μ  μ„λ²„μ— λ€ν• ν‰κ·  μ”μ²­ λΉ„μ¨μ΄ μ΄λ‹Ή `15 μ”μ²­`μ΄λΌκ³  κ°€μ •ν•μ.
- HTTP λ©”μ‹μ§€ μ”μ²­μ΄ λ¬΄μ‹ν• λ§νΌ μ‘μΌλ―€λ΅ λ„¤νΈμ›ν¬ μ ‘μ† νμ„ μ— μ–΄λ–¤ νΈλν”½λ„ λ°μƒμ‹ν‚¤μ§€ μ•λ”λ‹¤κ³  κ°€μ •ν•μ.
- λν•, μ ‘μ† νμ„ μ μΈν„°λ„· λ¶€λ¶„ λΌμ°ν„°κ°€ **HTTP μ”μ²­μ„ μ „λ‹¬ν•κ³  μ‘λ‹µμ„ λ°›μ„ λ•κΉμ§€ ν‰κ·  μ†μ” μ‹κ°„**μ„ `2μ΄`λΌκ³  κ°€μ •ν•μ.  
  ν†µμƒ μ΄λ¬ν• μ§€μ—°μ„ `μΈν„°λ„· μ§€μ—°`μ΄λΌκ³  ν•λ‹¤.

> μ΄ μ‘λ‹µ μ‹κ°„ = LAN μ§€μ—° + μ ‘μ† μ§€μ—° + μΈν„°λ„· μ§€μ—°

<br/>

LANμ νΈλν”½ κ°•λ„λ” λ‹¤μκ³Ό κ°™λ‹¤.

```
(15 μ”μ²­/μ΄) X (1 Mb/μ”μ²­) / 100 Mbps = 0.15
```

<br/>

μ ‘μ† νμ„ (λΌμ°ν„°μ™€ λΌμ°ν„° μ‚¬μ΄)μ νΈλν”½ κ°•λ„λ” λ‹¤μκ³Ό κ°™λ‹¤.

```
(15 μ”μ²­/μ΄) X (1 Mb/μ”μ²­) / 15 Mbps = 1
```

<br/>

LANμ νΈλν”½ κ°•λ„λ” λ§μ•„μ•Ό μμ‹­ msμ μ§€μ—°μ„ μ•ΌκΈ°ν•λ―€λ΅ LAN μ§€μ—°μ„ λ¬΄μ‹ν•  μ μμ§€λ§,  
νΈλν”½ κ°•λ„κ°€ 1μ— κ°€κΉμ›μ§€λ©΄ 1.4μ μ—μ„ λ…Όμν• κ²ƒκ³Ό κ°™μ΄ νμ„ μ μ§€μ—°μ€ λ§¤μ° μ»¤μ§€κ³  ν•μ—†μ΄ μ¦κ°€ν•λ‹¤.

**μ ‘μ† νμ„ μ μ ‘μ†λ¥ μ„ 100 Mbps μμ¤€μΌλ΅ λλ¦¬λ©΄ νΈλν”½ κ°•λ„λ¥Ό 0.15λ΅ λ‚®μ¶”μ–΄ ν•΄κ²°ν•  μ μκ² μ§€λ§, λ§¤μ° λ§μ€ λΉ„μ©μ΄ λ“¤μ–΄κ°„λ‹¤.**

<br/>

---

<br/>

μ›Ή μΊμ‹λ¥Ό μ‚¬μ©ν• μμ‹λ¥Ό λ³΄μ.

<p align="center"><img width="370" alt="μΈν„°λ„·μ κµ¬μ„± μ”μ†" src="https://user-images.githubusercontent.com/76640167/210506730-5cb70fea-a9ed-4817-afe0-4463bfd24a4a.png">

<br/>
<br/>

`μΊμ‹κ°€ λ§μ΅±μ‹ν‚¨ μ”μ²­μ λΉ„μ¨(hit rate)`μ€ μΌλ°μ μΌλ΅ 0.2 ~ 0.7μ΄λ©°, μ΄ μμ‹μ—μ„λ” `0.4μ μ μ¤‘λ¥ `μ„ κ°€μ§„λ‹¤κ³  κ°€μ •ν•μ.

- μΊμ‹μ™€ ν΄λΌμ΄μ–ΈνΈλ” κ³ μ† LANμΌλ΅ μ—°κ²°λμ–΄ μμ–΄, μ”μ²­μ 40%λ” μΊμ‹μ— μν•΄(10ms μ΄λ‚΄) μ¦‰μ‹ λ§μ΅±λλ‹¤.
- λ‚λ¨Έμ§€ 60%μ μ”μ²­μ€ μ—¬μ „ν κΈ°μ  μ„λ²„μ— μν•΄ λ§μ΅±λμ–΄μ•Ό ν•λ―€λ΅ νΈλν”½ κ°•λ„λ” 1.0μ—μ„ 0.6μΌλ΅ κ°μ†ν•λ‹¤.

μΌλ°μ μΌλ΅ 0.8 λ―Έλ§μ νΈλν”½ κ°•λ„λ” μ‘μ€ μ§€μ—°μ— μ†ν•λ‹¤. (2μ΄μ— μν•λ©΄ λ¬΄μ‹ν•  μ μλ” μμ¤€μ΄λ‹¤.)

<br/>

μ΄λ“¤μ„ κ³ λ ¤ν• ν‰κ·  μ§€μ—°μ€ λ‹¤μκ³Ό κ°™λ‹¤.

```
0.4 X 0.01μ΄ + 0.6 X 2.01μ΄ = 1.2....
```

<br/>

λ§μ€ μΊμ‹κ°€ μ €λ ΄ν• PCμ—μ„ μ‹¤ν–‰λλ” κ³µκ° μ†ν”„νΈμ›¨μ–΄λ¥Ό μ‚¬μ©ν•λ‹¤.

- μ½ν…μΈ  μ „μ†΅ λ„¤νΈμ›ν¬(CDN)μ„ ν†µν•΄ μ›Ή μΊμ‹λ” μΈν„°λ„·μ—μ„ μ μ§„μ μΌλ΅ μ¤‘μ”ν• μ—­ν• μ„ ν•κ³  μλ‹¤.

- CDN νμ‚¬λ” μΈν„°λ„· μ „μ—­μ„ ν†µν•΄ λ§μ€ μ§€μ—­μ μΌλ΅ λ¶„μ‚°λ μΊμ‹λ¥Ό μ„¤μΉν•κ³  μμΌλ©°,  
  μ΄λ¥Ό ν†µν•΄ λ§μ€ νΈλν”½μ„ μ§€μ—­ν™”ν•κ³  μλ‹¤. (μ „μ© CDNμ„ μ‚¬μ©ν•κΈ°λ„ ν•λ‹¤.)

<br/>
<br/>

## μ΅°κ±΄λ¶€(conditional) GET

> μ›Ή μΊμ‹±μ΄ μ‚¬μ©μκ°€ λλΌλ” μ‘λ‹µ μ‹κ°„μ„ μ¤„μΌ μ μμ§€λ§, **μ›Ή μΊμ‹ λ‚΄λ¶€μ— μλ” λ³µμ‚¬λ³Έμ΄ μƒ κ²ƒμ΄ μ•„λ‹ μ μλ‹¤**λ” λ¬Έμ λ¥Ό μ•ΌκΈ°ν•λ‹¤.

λ³µμ‚¬λ³Έμ΄ ν΄λΌμ΄μ–ΈνΈμ— μΊμ‹±λ μ΄ν›„ μ›Ή μ„λ²„μ— μλ” κ°μ²΄κ°€ κ°±μ‹ λμ—μ„ μλ„ μκΈ° λ•λ¬Έμ΄λ‹¤.

<br/>

> π’΅ HTTPλ” ν΄λΌμ΄μ–ΈνΈκ°€ **λΈλΌμ°μ €λ΅ μ „λ‹¬λλ” λ¨λ“  κ°μ²΄κ°€ μµμ‹ μ κ²ƒμ„μ„ ν™•μΈν•λ©΄μ„ μΊμ‹±**ν•΄μ£Όλ”λ°,  
> μ΄λ¬ν• λ°©μ‹μ„ `μ΅°κ±΄λ¶€ GET(conditional GET)` μ΄λΌκ³  ν•λ‹¤.

> Goal: don't send object if cache has **up-to-date cached version**

HTTP μ”μ²­ λ©”μ‹μ§€κ°€ (1) GET λ°©μ‹μ„ μ‚¬μ©ν•κ³ , (2) `If-modified-since ν—¤λ”`λ¥Ό ν¬ν•¨ν•λ‹¤λ©΄, κ·Έκ²ƒμ΄ μ΅°κ±΄λ¶€ GETμ΄λ‹¤.

<br/>

### μ΅°κ±΄λ¶€ GET λ™μ‘ κ³Όμ •

1. λΈλΌμ°μ €μ μ”μ²­μ„ λ€μ‹ ν•΄μ„ ν”„λ΅μ‹ μΊμ‹λ” μ”μ²­ λ©”μ‹μ§€λ¥Ό μ›Ή μ„λ²„λ΅ λ³΄λ‚Έλ‹¤.

```
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
```

<br/>

2. μ›Ή μ„λ²„λ” μΊμ‹μ—κ² κ°μ²΄λ¥Ό κ°€μ§„ μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.

```
HTTP/1.1 200 OK
Date: Sat, 3 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
Last-Modified: Wed, 9 Sep 2015 09:23:24
Content-Type: image/gif
(data data data data data ...)
```

- μΊμ‹λ” μ”μ²­ν•λ” λΈλΌμ°μ €μ—κ² κ°μ²΄λ¥Ό λ³΄λ‚΄μ£Όκ³  μμ‹ μ—κ²λ„ κ°μ²΄λ¥Ό μ €μ¥ν•λ‹¤.
- μ¤‘μ”ν• κ²ƒμ€ μΊμ‹κ°€ κ°μ²΄μ™€ λ”λ¶μ–΄ **λ§μ§€λ§‰μΌλ΅ μμ •λ λ‚ μ§λ¥Ό ν•¨κ» μ €μ¥ν•λ‹¤**λ” κ²ƒμ΄λ‹¤.

<br/>

3. μΌμ£ΌμΌ ν›„μ— λ‹¤λ¥Έ λΈλΌμ°μ €κ°€ κ°™μ€ κ°μ²΄λ¥Ό μΊμ‹μ—κ² μ”μ²­ν•λ©΄ μΊμ‹μ— μ €μ¥λμ–΄ μλ‹¤.  
   μ΄ κ°μ²΄λ” μ§€λ‚μ£Όμ— μ›Ή μ„λ²„μ—μ„ μμ •λμ—μΌλ―€λ΅, λΈλΌμ°μ €λ” `μ΅°κ±΄λ¶€ GET`μΌλ΅ μ΅°μ‚¬λ¥Ό μν–‰ν•λ‹¤.

```
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
If-modified-since: Wed, 9 Sep 2015 09:23:24
```

- `If-modified-since` κ°’μ΄ μΌμ£ΌμΌ μ „μ— μ„λ²„κ°€ λ³΄λ‚Έ Last-Modified κ°’κ³Ό μ™„λ²½ν μΌμΉν•λ‹¤.

- μ΄ μ΅°κ±΄λ¶€ GETμ€ μ„λ²„μ—κ² **If-modified-sinceμ— λ…μ‹λ κ°’ μ΄ν›„ μμ •λ κ²½μ°μ—λ§ κ·Έ κ°μ²΄λ¥Ό λ³΄λ‚΄λΌκ³  ν•λ‹¤.**

<br/>

4. λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄,

```
HTTP/1.1 304 Not Modified
Date: Sat, 10 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
(empty entity body)
```

- μ„μ™€ κ°™μ€ μ‘λ‹µμ„ λ³΄λ‚Έλ‹¤.  
  λ°μ΄ν„°κ°€ λ³€ν™”κ°€ μ—†μ–΄λ„ κ°μ²΄λ¥Ό λ³΄λ‚΄λ” κ²ƒμ€ λ€μ—­ν­μ„ λ‚­λΉ„ν•λ” κ²ƒμ΄κ³ , νΉν κ·Έ κ°μ²΄κ°€ ν¬λ‹¤λ©΄ μ‚¬μ©μκ°€ λλΌλ” μ‘λ‹µ μ‹κ°„μ΄ μ¦κ°€λλ‹¤.
- μ„ μ‘λ‹µ λ©”μ‹μ§€λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ”μ²­ κ°μ²΄μ μΊμ‹±λ λ³µμ‚¬λ³Έμ„ μ‚¬μ©ν•λΌλ” κ²ƒμ„ μλ―Έν•λ‹¤.

<br/>
<br/>
<br/>

# 2.2.6 HTTP/2

2020λ…„ ν„μ¬ μ£Όμ” μ›Ή μ‚¬μ΄νΈ μ²λ§ κ°μ 40%κ°€ `HTTP/2`λ¥Ό μ§€μ›ν•κ³  μλ‹¤.

HTTP/2μ μ£Όμ” λ©ν‘λ” ν•λ‚μ TCP μ—°κ²°μƒμ—μ„ λ©€ν‹°ν”λ ‰μ‹± μ”μ²­/μ‘λ‹µ μ§€μ—° μ‹κ°„μ„ μ¤„μ΄λ” λ° μμΌλ©°,  
μ”μ²­ μ°μ„ μμ„ν™”, μ„λ²„ ν‘Έμ‹, HTTP ν—¤λ” ν•„λ“μ ν¨μ¨μ μΈ μ••μ¶• κΈ°λ¥ λ“±μ„ μ κ³µν•λ‹¤.

HTTP/2λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ λ°μ΄ν„° ν¬λ§· λ°©λ²•κ³Ό μ „μ†΅ λ°©λ²•μ„ λ³€κ²½ν–λ‹¤.

<br/>
<br/>

## κΈ°μ΅΄μ HTTP/1.1

μ§€μ†μ μΈ μ—°κ²°μ„ μ‚¬μ©ν•  λ• **μ›Ή νμ΄μ§€λ‹Ή μ¤μ§ ν•λ‚μ TCP μ—°κ²°**μ„ κ°€μ§μΌλ΅μ¨,  
μ•„λ μ„¤λ…ν•λ“―μ΄ μ„λ²„μ—μ„μ μ†μΌ“ μλ¥Ό μ¤„μ΄λ©° μ „μ†΅λλ” κ° μ›Ή νμ΄μ§€λ” κ³µμ •ν• λ„¤νΈμ›ν¬ λ€μ—­ν­μ„ κ°€μ§ μ μλ‹¤.

κ·Έλ¬λ‚ ν•λ‚μ TCP μƒμ—μ„ λ¨λ“  μ›Ήνμ΄μ§€λ¥Ό λ³΄λ‚΄λ©΄ `HOL(Head of Line) λΈ”λ΅ν‚Ή λ¬Έμ `κ°€ λ°μƒν•  μ μλ‹¤.

<br/><br/>

### HOL λΈ”λ΅ν‚Ή λ¬Έμ 

λΉ„λ””μ¤ μ•„λ μλ§μ€ μ‘μ€ κ°μ²΄λ“¤μ„ ν¬ν•¨ν•  λ• μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ— μ €μ†μ—μ„ μ¤‘κ°„ μ†λ„μ **λ³‘λ© λ§ν¬**κ°€ μλ‹¤κ³  ν•μ.

λΉ„λ””μ¤ ν΄λ¦½μ€ λ³‘λ© λ§ν¬λ¥Ό ν†µκ³Όν•λ”λ° μ¤λ κ±Έλ¦¬λ” λ°λ©΄, **μ‘μ€ κ°μ²΄λ“¤μ€ λΉ„λ””μ¤ ν΄λ¦½ λ’¤μ—μ„ κΈ°λ‹¤λ¦Όμ΄ κΈΈμ–΄μ§„λ‹¤.**

μ¦‰, λΉ„λ””μ¤ ν΄λ¦½μ΄ κ°μ²΄λ“¤μ„ λΈ”λ΅ν‚Ήν•κ² λλ‹¤.

<br/>

HTTP/1.1μ—μ„λ” **μ—¬λ¬ κ°μ λ³‘λ ¬ TCP μ—°κ²°**μ„ μ—΄μ–΄μ„ μ„ λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ™”λ‹¤.

<br/>
<br/>

### TCP νΌμ΅ μ μ–΄

TCP νΌμ΅ μ μ–΄λ” κ° TCP μ—°κ²°μ΄ κ³µμ •ν•κ² λ³‘λ© λ§ν¬λ¥Ό κ³µμ ν•μ—¬ **κ°™μ€ ν¬κΈ°μ κ°€μ©ν• λ€μ—­ν­μ„ κ³µν‰ν•κ² λ‚λ„κ² ν•΄μ¤€λ‹¤.**

λ§μΌ nκ°μ TCP μ—°κ²°μ΄ λ³‘λ© λ§ν¬μ—μ„ μ‘λ™ν•κ³  μλ‹¤λ©΄, κ° μ—°κ²°μ€ λ€λµ λ€μ—­ν­μ 1/n μ”©μ„ μ‚¬μ©ν•κ² λλ‹¤.

<br/>

ν•λ‚μ μ›Ή νμ΄μ§€λ¥Ό μ „μ†΅ν•κΈ° μ„ν•΄ μ—¬λ¬ κ°μ λ³‘λ ¬ TCP μ—°κ²°μ„ μ—΄κ² ν•¨μΌλ΅μ¨ λΈλΌμ°μ €λ” μΌμΆ…μ μ†μ„μλ΅ λ§ν¬ λ€μ—­ν­μ λ§μ€ λ¶€λ¶„μ„ λ°›κ² λλ‹¤.

λ§μ€ HTTP/1.1 λΈλΌμ°μ €λ“¤μ€ 6κ°κΉμ§€ λ³‘λ ¬ TCP μ—°κ²°μ„ μ—΄κ³  HOLμ„ λ§‰μ„ λΏλ§ μ•„λ‹λΌ λ” λ§μ€ λ€μ—­ν­μ„ μ‚¬μ©ν•  μ μκ² ν•λ‹¤.

<br/>
<br/>

## HTTP/2 ν”„λ μ΄λ°(framing)

> HTTP/2μ μ£Όμ” λ©ν‘ μ¤‘ ν•λ‚λ” ν•λ‚μ μ›Ή νμ΄μ§€λ¥Ό μ „μ†΅ν•κΈ° μ„ν• λ³‘λ ¬ TCP μ—°κ²°μ μλ¥Ό μ¤„μ΄κ±°λ‚ μ κ±°ν•λ” λ° μλ‹¤.

μ΄λ” μ„λ²„μ—μ„ μ—΄κ³  μ μ§€λλ” λ° ν•„μ”ν• μ†μΌ“μ μλ¥Ό μ¤„μΌ λΏλ§ μ•„λ‹λΌ λ©ν‘ν• λ€λ΅ TCP νΌμ΅ μ μ–΄λ¥Ό μ μ–΄ν•  μ μκ² ν•λ” λ° μλ‹¤.

κ·Έλ¬λ‚ μ›Ή νμ΄μ§€λ¥Ό μ „μ†΅ν•κΈ° μ„ν•΄ μ¤μ§ ν•λ‚μ TCP μ—°κ²°λ§μ„ μ‚¬μ©ν•κ² λ  κ²½μ°μ— HTTP/2λ” HOL λΈ”λ΅ν‚Ήμ„ ν”Όν•κΈ° μ„ν•΄ μ‹ μ¤‘ν•κ² κµ¬ν„λ λ©”μ»¤λ‹μ¦μ΄ ν•„μ”ν•λ‹¤.

<br/>

> π’΅ `HTTP/2 ν”„λ μ΄λ°(framing)`μ΄λ€, HTTP λ©”μ‹μ§€λ¥Ό λ…λ¦½λ ν”„λ μ„λ“¤λ΅ μΌκ°κ³ , μΈν„°λ¦¬λΉ™(interleaving)ν•κ³ , λ°λ€νΈ μ‚¬μ΄νΈμ—μ„ μ¬μ΅°λ¦½ν•λ” κ²ƒμ΄λ‹¤.

μλ¥Ό λ“¤μ–΄, λΉ„λ””μ¤ ν΄λ¦½κ³Ό ν¬κΈ°κ°€ μ‘μ€ κ°μ²΄ 8κ°μ μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄, μ„λ²„λ” 9κ°μ κ°μ²΄λ¥Ό λ³΄λ‚΄κΈ° μ„ν• TCP λ³‘λ ¬ μ”μ²­μ„ λ°›κ²λλ‹¤.

μ΄λ• (1) λΉ„λ””μ¤ ν΄λ¦½μ„ 1000κ°μ ν”„λ μ„μΌλ΅ λ‚λ„κ³  (2) κ° κ°μ²΄λ¥Ό 2κ°μ ν”„λ μ„μΌλ΅ λ‚λ„μ–΄ λΉ„λ””μ¤ ν΄λ¦½μΌλ΅λ¶€ν„° ν•λ‚μ ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤.

μ΄ν›„ ν”„λ μ„ μΈν„°λ¦¬λΉ™μ„ μ΄μ©ν•μ—¬ κ° μ†ν• κ°μ²΄μ μ²« λ²μ§Έ ν”„λ μ„μ„ λ³΄λ‚΄κ³  μ΄λ¥Ό λ°λ³µν•μ—¬ HOL λΈ”λ΅ν‚Ήμ„ ν”Όν•  μ μλ‹¤.

<br/>
<br/>

**HTTP λ©”μ‹μ§€λ¥Ό λ…λ¦½λ ν”„λ μ„λ“¤λ΅ μΌκ°κ³  μΈν„°λ¦¬λΉ™ν•κ³  λ°λ€νΈ μ‚¬μ΄νΈμ—μ„ μ¬μ΅°λ¦½ν•λ” κ²ƒμ΄μ•Όλ§λ΅ HTTP/2μ κ°€μ¥ μ¤‘μ”ν• κ°μ„ μ μ΄λ‹¤.**

ν”„λ μ΄λ°μ€ HTTP/2 ν”„λ΅ν† μ½μ ν”„λ μ„μΌλ΅ κµ¬ν„λ λ‹¤λ¥Έ ν”„λ μ΄λ° μ„λΈ κ³„μΈµμ— μν•΄ μ΄λ£¨μ–΄μ§„λ‹¤.

μ„λ²„κ°€ HTTP μ‘λ‹µμ„ λ³΄λ‚΄κ³ μ ν•  λ•, μ‘λ‹µμ€ ν”„λ μ΄λ° μ„λΈ κ³„μΈµμ— μν•΄ μ²λ¦¬λλ©° ν”„λ μ„λ“¤λ΅ λ‚λ μ§„λ‹¤.

μ‘λ‹µμ ν—¤λ”ν•„λ“λ” ν•λ‚μ ν”„λ μ„μ΄ λκ³ , λ©”μ‹μ§€ λ³Έλ¬Έμ€ ν•λ‚μ ν”„λ μ„μΌλ΅ μΌκ°μ§„λ‹¤.

μ‘λ‹µ ν”„λ μ„λ“¤μ€ μ„λ²„μ ν”„λ μ΄λ° μ„λΈ κ³„μΈµμ— μν•΄ μΈν„°λ¦¬λΉ™λ ν›„ ν•λ‚μ μ§€μ†μ μΈ TCP μ—°κ²°μƒμ—μ„ μ „μ†΅λλ‹¤.

ν”„λ μ„λ“¤μ΄ ν΄λΌμ΄μ–ΈνΈμ— λ„μ°©ν•λ©΄ ν”„λ μ΄λ° μ„λΈ κ³„μΈµμ—μ„ μ²μ μ‘λ‹µλ©”μ‹μ§€λ΅ μ¬μ΅°λ¦½λλ©° λΈλΌμ°μ €μ— μν•΄ μ²λ¦¬λλ‹¤. (ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ”μ²­ν•  λ•λ„ λ§μ°¬κ°€μ§€μ΄λ‹¤.)

<br/>

κ° HTTP λ©”μ‹μ§€λ¥Ό λ…λ¦½μ μΈ ν”„λ μ„μΌλ΅ μΌκ°λ” κ²ƒ μ™Έμ—λ„ ν”„λ μ΄λ° μ„λΈ κ³„μΈµμ€ ν”„λ μ„μ„ λ°”μ΄λ„λ¦¬ μΈμ½”λ”©ν•λ‹¤.

λ°”μ΄λ„λ¦¬ ν”„λ΅ν† μ½μ€ νμ‹±ν•κΈ°μ— ν¨μ¨μ μ΄κ³ , λ” μ‘μ€ ν”„λ μ„ ν¬κΈ°λ¥Ό κ°–κ³ , μ—λ¬μ— κ°•ν•λ‹¤.

<br/>

### λ©”μ‹μ§€ μ°μ„ μμ„ν™”

`λ©”μ‹μ§€ μ°μ„ μμ„ν™”`λ” κ°λ°μλ“¤λ΅ ν•μ—¬κΈ μ”μ²­λ“¤μ μƒλ€μ  μ°μ„  μμ„λ¥Ό μ΅°μ •ν•  μ μκ² ν•¨μΌλ΅μ¨ μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥μ„ μµμ ν™”ν•  μ μκ² ν•΄μ¤€λ‹¤.

<br/>

ν΄λΌμ΄μ–ΈνΈκ°€ ν•λ‚μ νΉμ • μ„λ²„λ΅ λ™μ‹μ— μ—¬λ¬ κ°μ μ”μ²­μ„ ν•  λ•, κ° λ©”μ‹μ§€μ— 1μ—μ„ 256 μ‚¬μ΄μ κ°€μ¤‘μΉλ¥Ό λ¶€μ—¬ν•¨μΌλ΅μ¨ μ”μ²­μ— μ°μ„ μμ„λ¥Ό λ§¤κΈΈ μ μλ‹¤.

> λ†’μ€ μμΉμΌμλ΅ λ†’μ€ μ°μ„ μμ„λ¥Ό κ°–λ”λ‹¤.

μ„λ²„λ” κ°€μ¥ λ†’μ€ μ°μ„ μμ„μ μ”μ²­μ„ μ„ν• ν”„λ μ„μ„ μ μΌ λ¨Όμ € λ³΄λ‚Ό μ μλ‹¤.

<br/>

ν΄λΌμ΄μ–ΈνΈ λν• κ° μμ΅΄λ„μ— λ”°λΌ λ©”μ‹μ§€μ IDλ¥Ό μ§€μ •ν•μ—¬ μ„λ΅ λ‹¤λ¥Έ λ©”μ‹μ§€λ“¤ κ°„μ μμ΅΄μ„±μ„ λ‚νƒ€λ‚Ό μ μλ‹¤.

<br/>

### μ„λ²„ ν‘Έμ‹±

HTTP/2μ λ λ‹¤λ¥Έ νΉμ§•μ€ μ„λ²„λ΅ ν•μ—¬κΈ **νΉμ • ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— λ€ν•΄ μ—¬λ¬ κ°μ μ‘λ‹µμ„ λ³΄λ‚Ό μ μκ² ν•΄μ£Όλ” λ° μλ‹¤.**

μ²μ μ”μ²­μ— λ€ν• μ‘λ‹µ μ™Έμ—λ„, μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ μ—†μ΄λ„ μ¶”κ°€μ μΈ κ°μ²΄λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² **ν‘Έμ‹**ν•μ—¬ λ³΄λ‚Ό μ μλ‹¤.

μ΄λ” HTML κΈ°λ° νμ΄μ§€κ°€ μ›Ή νμ΄μ§€λ¥Ό μ™„λ²½ν•κ² κµ¬λ™μ‹ν‚¬ ν•„μ”κ°€ μλ” κ°μ²΄λ“¤μ„ κ°€λ¦¬ν‚¬ μ μκΈ°μ— κ°€λ¥ν•λ‹¤.

μ΄λ¬ν• κ°μ²΄μ— λ€ν• HTTP μ”μ²­μ„ κΈ°λ‹¤λ¦¬λ” λ€μ‹  μ„λ²„λ” HTMLμ„ λ¶„μ„ν•  μ μκ³ , ν•„μ”ν• κ°μ²΄λ“¤μ„ μ‹λ³„ν•  μ μκ³ ,  
**ν•΄λ‹Ή κ°μ²΄λ“¤μ— λ€ν• μ”μ²­μ΄ λ„μ°©ν•κΈ°λ„ μ „μ—** ν•΄λ‹Ή κ°μ²΄λ“¤μ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚Έλ‹¤.

μ„λ²„λ” ν•΄λ‹Ή μ”μ²­λ“¤μ„ κΈ°λ‹¤λ¦¬λ” λ° μ†μ”λλ” μ¶”κ°€ μ§€μ—°μ„ μ—†μ•¤λ‹¤.

<br/>
<br/>

## HTTP/3

νΈλμ¤ ν”„λ΅ν† μ½μΈ QUIC(3μ¥μ—μ„ λ‹¤λ£¬λ‹¤) μ„μ—μ„ μ‘λ™ν•λ„λ΅ μ„¤κ³„λ μƒλ΅μ΄ HTTP ν”„λ΅ν† μ½λ΅μ„, μ™„μ „ν ν‘μ¤€ν™”λ μƒνƒλ” μ•„λ‹λ‹¤.
